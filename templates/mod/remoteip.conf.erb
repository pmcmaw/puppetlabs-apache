# Declare the header field which should be parsed for useragent IP addresses
RemoteIPHeader <%= @header %>

<%- if @_internal_proxy -%>
# Declare client intranet IP addresses trusted to present
# the RemoteIPHeader value
<%-   [@_internal_proxy].flatten.each do |proxy| -%>
RemoteIPInternalProxy <%= proxy %>
<%-   end -%>
<%- end -%>

<%- if @proxies_header -%>
# Declare the header field which will record all intermediate IP addresses
RemoteIPProxiesHeader <%= @proxies_header %>
<%- end -%>

<%- if @_trusted_proxy -%>
# Declare client intranet IP addresses trusted to present
# the RemoteIPHeader value
  <%- [@_trusted_proxy].flatten.each do |proxy| -%>
RemoteIPTrustedProxy <%= proxy %>
  <%- end -%>
<%- end -%>
